{"ast":null,"code":"var fs = require('fs');\n\nvar path = require('path');\n\nvar os = require('os'); // Workaround to fix webpack's build warnings: 'the request of a dependency is an expression'\n\n\nvar runtimeRequire = typeof __webpack_require__ === 'function' ? __non_webpack_require__ : require; // eslint-disable-line\n\nvar prebuildsOnly = !!process.env.PREBUILDS_ONLY;\nvar abi = process.versions.modules; // TODO: support old node where this is undef\n\nvar runtime = isElectron() ? 'electron' : 'node';\nvar arch = os.arch();\nvar platform = os.platform();\nvar libc = process.env.LIBC || (isAlpine(platform) ? 'musl' : 'glibc');\nvar armv = process.env.ARM_VERSION || (arch === 'arm64' ? '8' : process.config.variables.arm_version) || '';\nmodule.exports = load;\n\nfunction load(dir) {\n  return runtimeRequire(load.path(dir));\n}\n\nload.path = function (dir) {\n  dir = path.resolve(dir || '.');\n\n  try {\n    var name = runtimeRequire(path.join(dir, 'package.json')).name.toUpperCase().replace(/-/g, '_');\n    if (process.env[name + '_PREBUILD']) dir = process.env[name + '_PREBUILD'];\n  } catch (err) {}\n\n  if (!prebuildsOnly) {\n    var release = getFirst(path.join(dir, 'build/Release'), matchBuild);\n    if (release) return release;\n    var debug = getFirst(path.join(dir, 'build/Debug'), matchBuild);\n    if (debug) return debug;\n  }\n\n  var names = [platform + '-' + arch];\n  if (libc) names.push(platform + libc + '-' + arch);\n\n  if ((arch === 'arm' || arch === 'arm64') && armv) {\n    names.forEach(function (name) {\n      names.push(name + '-v' + armv);\n    });\n  } // Find most specific flavor first\n\n\n  for (var i = names.length; i--;) {\n    var prebuild = getFirst(path.join(dir, 'prebuilds/' + names[i]), matchPrebuild);\n    if (prebuild) return prebuild;\n    var napiRuntime = getFirst(path.join(dir, 'prebuilds/' + names[i]), matchNapiRuntime);\n    if (napiRuntime) return napiRuntime;\n    var napi = getFirst(path.join(dir, 'prebuilds/' + names[i]), matchNapi);\n    if (napi) return napi;\n  }\n\n  throw new Error('No native build was found for runtime=' + runtime + ' abi=' + abi + ' platform=' + platform + libc + ' arch=' + arch);\n};\n\nfunction getFirst(dir, filter) {\n  try {\n    var files = fs.readdirSync(dir).filter(filter);\n    return files[0] && path.join(dir, files[0]);\n  } catch (err) {\n    return null;\n  }\n}\n\nfunction matchNapiRuntime(name) {\n  return name === runtime + '-napi.node';\n}\n\nfunction matchNapi(name) {\n  return name === 'node-napi.node';\n}\n\nfunction matchPrebuild(name) {\n  var parts = name.split('-');\n  return parts[0] === runtime && parts[1] === abi + '.node';\n}\n\nfunction matchBuild(name) {\n  return /\\.node$/.test(name);\n}\n\nfunction isElectron() {\n  if (process.versions && process.versions.electron) return true;\n  if (process.env.ELECTRON_RUN_AS_NODE) return true;\n  return typeof window !== 'undefined' && window.process && window.process.type === 'renderer';\n}\n\nfunction isAlpine(platform) {\n  return platform === 'linux' && fs.existsSync('/etc/alpine-release');\n}","map":{"version":3,"sources":["/Users/danielcalderon/vinology/Vinology-client/node_modules/node-gyp-build/index.js"],"names":["fs","require","path","os","runtimeRequire","__webpack_require__","__non_webpack_require__","prebuildsOnly","process","env","PREBUILDS_ONLY","abi","versions","modules","runtime","isElectron","arch","platform","libc","LIBC","isAlpine","armv","ARM_VERSION","config","variables","arm_version","module","exports","load","dir","resolve","name","join","toUpperCase","replace","err","release","getFirst","matchBuild","debug","names","push","forEach","i","length","prebuild","matchPrebuild","napiRuntime","matchNapiRuntime","napi","matchNapi","Error","filter","files","readdirSync","parts","split","test","electron","ELECTRON_RUN_AS_NODE","window","type","existsSync"],"mappings":"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","sourcesContent":["var fs = require('fs')\nvar path = require('path')\nvar os = require('os')\n\n// Workaround to fix webpack's build warnings: 'the request of a dependency is an expression'\nvar runtimeRequire = typeof __webpack_require__ === 'function' ? __non_webpack_require__ : require // eslint-disable-line\n\nvar prebuildsOnly = !!process.env.PREBUILDS_ONLY\nvar abi = process.versions.modules // TODO: support old node where this is undef\nvar runtime = isElectron() ? 'electron' : 'node'\nvar arch = os.arch()\nvar platform = os.platform()\nvar libc = process.env.LIBC || (isAlpine(platform) ? 'musl' : 'glibc')\nvar armv = process.env.ARM_VERSION || (arch === 'arm64' ? '8' : process.config.variables.arm_version) || ''\n\nmodule.exports = load\n\nfunction load (dir) {\n  return runtimeRequire(load.path(dir))\n}\n\nload.path = function (dir) {\n  dir = path.resolve(dir || '.')\n\n  try {\n    var name = runtimeRequire(path.join(dir, 'package.json')).name.toUpperCase().replace(/-/g, '_')\n    if (process.env[name + '_PREBUILD']) dir = process.env[name + '_PREBUILD']\n  } catch (err) {}\n\n  if (!prebuildsOnly) {\n    var release = getFirst(path.join(dir, 'build/Release'), matchBuild)\n    if (release) return release\n\n    var debug = getFirst(path.join(dir, 'build/Debug'), matchBuild)\n    if (debug) return debug\n  }\n\n  var names = [platform + '-' + arch]\n  if (libc) names.push(platform + libc + '-' + arch)\n\n  if ((arch === 'arm' || arch === 'arm64') && armv) {\n    names.forEach(function (name) {\n      names.push(name + '-v' + armv)\n    })\n  }\n\n  // Find most specific flavor first\n  for (var i = names.length; i--;) {\n    var prebuild = getFirst(path.join(dir, 'prebuilds/' + names[i]), matchPrebuild)\n    if (prebuild) return prebuild\n\n    var napiRuntime = getFirst(path.join(dir, 'prebuilds/' + names[i]), matchNapiRuntime)\n    if (napiRuntime) return napiRuntime\n\n    var napi = getFirst(path.join(dir, 'prebuilds/' + names[i]), matchNapi)\n    if (napi) return napi\n  }\n\n  throw new Error('No native build was found for runtime=' + runtime + ' abi=' + abi + ' platform=' + platform + libc + ' arch=' + arch)\n}\n\nfunction getFirst (dir, filter) {\n  try {\n    var files = fs.readdirSync(dir).filter(filter)\n    return files[0] && path.join(dir, files[0])\n  } catch (err) {\n    return null\n  }\n}\n\nfunction matchNapiRuntime (name) {\n  return name === runtime + '-napi.node'\n}\n\nfunction matchNapi (name) {\n  return name === 'node-napi.node'\n}\n\nfunction matchPrebuild (name) {\n  var parts = name.split('-')\n  return parts[0] === runtime && parts[1] === abi + '.node'\n}\n\nfunction matchBuild (name) {\n  return /\\.node$/.test(name)\n}\n\nfunction isElectron () {\n  if (process.versions && process.versions.electron) return true\n  if (process.env.ELECTRON_RUN_AS_NODE) return true\n  return typeof window !== 'undefined' && window.process && window.process.type === 'renderer'\n}\n\nfunction isAlpine (platform) {\n  return platform === 'linux' && fs.existsSync('/etc/alpine-release')\n}\n"]},"metadata":{},"sourceType":"script"}